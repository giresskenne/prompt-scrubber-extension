(()=>{"use strict";importScripts(chrome.runtime.getURL("src/detectorWorker.js"));const e=chrome.runtime.getURL("src/patterns.json");fetch(e).then((e=>e.json())).then((({identifiers:e})=>{self.prepareDetector(e),console.log("[Scrubber] detector ready -",e.length,"patterns")})).catch((e=>console.error("[Scrubber] failed to init detector",e))),chrome.runtime.onMessage.addListener(((e,t,r)=>"scan"===e?.type?(r(self.scanDetector(e.text||"")),!0):"ping"===e?.type?(r({ready:"function"==typeof self.scanDetector}),!0):void 0))})();